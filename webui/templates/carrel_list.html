{% extends "base.html" %}

{% block title %}
Study Carrels for {{ current_user.username }}
{% endblock %}


{% block body %}
<p>Below, select column headings and/or enter words into the search box to sort &amp; filter catalog items. Use the results to read, browse, or download carrels.</p>

<div class="table-responsive">
  <table id="directory" class="table table-striped">
    <!-- class="display" removed" -->
    <thead>
      <tr>
        <th>Name</th>
        <th>Created</th>
        <th>Items</th>
        <th>Words</th>
        <th>Readability</th>
        <th>Bytes</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in carrels|sort(attribute="shortname") %}
      <tr>
        <td>{{ entry.shortname }}</td>
        <td>{{ entry.created }}</td>
        <td class='text-right'>{{ entry.size_items | formatwithcommas }}</td>
        <td class='text-right'>{{ entry.size_words | formatwithcommas }}</td>
        <td class='text-right'>{{ entry.readability }}</td>
        <td class='text-right'>{{ entry.size_bytes | filesizeformat }}</td>
        <td class='text-right'>
          <a href='{{ url_for("patron_carrel", username=current_user.username, carrel=entry.shortname, p="index.htm") }}'>Read</a>,
          <a href='{{ url_for("patron_carrel", username=current_user.username, carrel=entry.shortname) }}'>Browse</a>,
          <a href='{{ url_for("patron_carrel", username=current_user.username, carrel=entry.shortname, p="study-carrel.zip") }}'>Download</a>
        </td>
      </tr>
      {% else %}
      <tr>
        <td>No Carrels</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script type="text/javascript" class="init">
    $(document).ready(function() { $('#directory').DataTable( {
        "order": [[ 1, "desc" ]],
        "pageLength": 100
    } ); } );
</script>

{% endblock %}
